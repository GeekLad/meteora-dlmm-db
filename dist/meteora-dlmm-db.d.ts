import { type MeteoraDlmmInstruction } from "./meteora-instruction-parser";
import { type MeteoraDlmmPairData, type MeteoraPositionTransactions } from "./meteora-dlmm-api";
import { type TokenMeta } from "./jupiter-token-list-api";
import MeteoraDlmmDownloader from "./meteora-dlmm-downloader";
interface MeteoraDlmmDbSchema {
    [column: string]: number | boolean | string | Array<unknown> | Uint8Array | null;
}
export interface MeteoraDlmmDbTransactions extends MeteoraDlmmDbSchema {
    block_time: number;
    is_hawksight: boolean;
    signature: string;
    position_address: string;
    owner_address: string;
    pair_address: string;
    base_mint: string;
    base_symbol: string;
    base_decimals: number;
    base_logo: string;
    quote_mint: string;
    quote_symbol: string;
    quote_decimals: number;
    quote_logo: string;
    is_inverted: number;
    removal_bps: number;
    position_is_open: boolean;
    price: number;
    fee_amount: number;
    deposit: number;
    withdrawal: number;
    impermanent_loss: number;
    pnl: number;
    usd_fee_amount: number;
    usd_deposit: number;
    usd_withdrawal: number;
    usd_impermanent_loss: number;
    usd_pnl: number;
}
export default class MeteoraDlmmDb {
    private _db;
    private _addInstructionStatement;
    private _addTransferStatement;
    private _addPairStatement;
    private _addTokenStatement;
    private _addUsdYStatement;
    private _addUsdXStatement;
    private _fillMissingUsdStatement;
    private _setOldestSignature;
    private _markCompleteStatement;
    private _getTransactions;
    private _downloaders;
    private _saving;
    private _queue;
    private constructor();
    static create(data?: ArrayLike<number> | Buffer | null): Promise<MeteoraDlmmDb>;
    static load(): Promise<MeteoraDlmmDb>;
    private _init;
    private _createTables;
    private _createStatements;
    private _addInitialData;
    download(endpoint: string, account: string, callbacks?: {
        onDone?: (...args: any[]) => any;
    }): MeteoraDlmmDownloader;
    addInstruction(instruction: MeteoraDlmmInstruction): Promise<void>;
    addTransfers(instruction: MeteoraDlmmInstruction): Promise<void>;
    addPair(pair: MeteoraDlmmPairData): Promise<void>;
    addToken(token: TokenMeta): Promise<void>;
    addUsdTransactions(position_address: string, transactions: MeteoraPositionTransactions): Promise<void>;
    setOldestSignature($account_address: string, $oldest_block_time: number, $oldest_signature: string): Promise<void>;
    markComplete($account_address: string): Promise<void>;
    isComplete(account_address: string): Promise<boolean>;
    getMissingPairs(): Promise<string[]>;
    getMissingTokens(): Promise<string[]>;
    getMissingUsd(): Promise<string[]>;
    getMostRecentSignature(owner_address: string): Promise<string | undefined>;
    getOldestSignature(owner_address: string): Promise<string | undefined>;
    getTransactions(): Promise<MeteoraDlmmDbTransactions[]>;
    cancelDownload(account: string): Promise<void>;
    private _getAll;
    private _queueDbCall;
    private _processQueue;
    save(): Promise<void>;
}
export {};
